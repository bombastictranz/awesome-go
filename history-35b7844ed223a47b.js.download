(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[602],{30982:function(e,t,n){"use strict";var r=n(28165),a=n(2784),o=n(52903),l={name:"3qivvs-TruncatedText--truncatedTextStyle",styles:"box-orient:vertical;-webkit-box-orient:vertical;display:inline-block;max-width:100%;overflow:hidden;text-overflow:ellipsis;vertical-align:text-bottom;white-space:nowrap;word-wrap:normal;label:TruncatedText--truncatedTextStyle;"},i={name:"20h900-TruncatedText--blockStyle",styles:"display:block;label:TruncatedText--blockStyle;"};t.Z=function(e){var t=e.children,n=e.id,s=e.isBlock,c=e.lines,u=void 0===c?1:c,d=e.title,p=a.Children.toArray(t),h=p.every(function(e){return"string"==typeof(e||"")||"number"==typeof e})?p.join(" "):void 0;return(0,o.tZ)("span",{css:[l,void 0!==s&&s&&i,u>1&&(0,r.iv)("display:-webkit-box;line-clamp:",u,";-webkit-line-clamp:",u,";white-space:inherit;;label:TruncatedText--multiLineStyle;"),";label:TruncatedText--TruncatedText;"],id:n,title:d||h,children:t})}},48377:function(e,t,n){"use strict";n.d(t,{m:function(){return useFilters}});var r=n(95235),a=n(5632),o=n(2784),l=n(25760),i=n(63615),s=n(581),c=n(65626);function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function useFilters(){var e=(0,i.V)().flags,t=(0,a.useRouter)(),n=(0,s.i)().emitEvent,u=o.useMemo(function(){return(0,c.Qn)(t.query,t.asPath)},[t]),d=o.useCallback(function(){t.push(t.pathname)},[t]),p=o.useCallback(function(a,o){var i=_objectSpread(_objectSpread({},u),{},(0,r.Z)({},a,o));"page"!==a&&1!==u.page&&(i.page=1),Object.keys(i).length>0&&("search"===a&&o&&n({eventName:l.rw,meta:{event_action:"select",experiment_flag:!!(null==e?void 0:e.monitor_unified_history_filter),experiment_name:"monitor_unified_history_filter",interaction_goal:"search_zap_history",interaction_name:"zap_history_search",interaction_raw_text:"Search Zap History",option_selected:"search"}}),t.push((0,c.lZ)(t.pathname,i,t.query)))},[n,u,null==e?void 0:e.monitor_unified_history_filter,t]);return{filters:u,handleFilterReset:d,handleFilterChange:p}}},82145:function(e,t,n){"use strict";n.d(t,{R:function(){return getZapTitle}});var r=n(25760);function getZapTitle(e){return"string"==typeof(null==e?void 0:e.title)&&e.title.length>0?e.title:null!=e&&e.id?"".concat(r.E2," (#").concat(e.id,")"):r.E2}},84474:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return History}});var r,a=n(95235),o=n(81333),l=n(21973),i=n(29455),s=n(5632),c=n(2784),u=n(55414),d=n(20110),p=n(53939),h=n(38716),b=n(23360),f=n(13441),m=n(11606),y=n(93273),w=n(16931),g=n(89381),_=n(52522),v=n(65626),Z=n(82792),R=n(25760),O=n(26243),S=n(48751),j=n(32931),k=n(60352),D=n(20406),x=n(12741),P=n(28526),C=n.n(P),T=n(64368),z=n(25237),B=n.n(z),X=n(28165),E=n(57199),A=n(3e3),F=n(99029),q=n(96963),H=n(18672),I=n(47043),M=n(581),N=n(87234),K=n(25522),L=n(44779),G=n(28726),V=n(82269),U=n(17305),W=n(27977),$=n(26215),J=n(23273),Q=n(41273),Y=n(32052),ee=n(63951),et=n(30982),en=n(82145),er=n(52903),ea=["isBack"],eo={name:"190f1d-RunRow--zapInfoStyle",styles:"align-items:center;display:grid;gap:0.25em;grid-template-columns:auto 1fr;@media (max-width: 400px){&>:first-child{display:none;}};label:RunRow--zapInfoStyle;"};function ZapFolder(e){var t,n,r,a,o="/app/zaps/folder/".concat(null!==(t=null===(n=e.run.zap.folder)||void 0===n?void 0:n.id)&&void 0!==t?t:0),l=null!==(r=e.run.zap.folder)&&void 0!==r&&r.isShared?"team":"navFolder";return(0,er.tZ)($.r,{href:o,children:(0,er.BX)("div",{css:eo,children:[(0,er.tZ)("div",{children:(0,er.tZ)(J.J,{name:l,size:24})}),(0,er.tZ)(et.Z,{children:(0,er.tZ)(u.x,{color:"inherit",type:"smallPrint1",children:null===(a=e.run.zap.folder)||void 0===a?void 0:a.title})})]})})}var el={name:"c7tkaj-RunRow--ZapOwner",styles:"display:flex;align-self:center;label:RunRow--ZapOwner;"};function ZapOwner(e){var t,n,r,a;return(0,er.BX)("div",{css:eo,children:[(0,er.tZ)("div",{css:el,children:(0,er.tZ)(Q.q,{name:null!==(t=null===(n=e.run.zapOwner)||void 0===n?void 0:n.name)&&void 0!==t?t:"Unknown",size:25})}),(0,er.tZ)(et.Z,{children:(0,er.tZ)(u.x,{color:"inherit",type:"smallPrint1",children:null!==(r=null===(a=e.run.zapOwner)||void 0===a?void 0:a.name)&&void 0!==r?r:"Unknown"})})]})}var ei={name:"5zo0la-RunRow--RunRow",styles:"grid-area:select;align-self:center;label:RunRow--RunRow;"},es={name:"1drt9ti-RunRow--RunRow",styles:"grid-area:status;label:RunRow--RunRow;"},ec={name:"1djhijs-RunRow--RunRow",styles:"grid-area:title;label:RunRow--RunRow;"},eu={name:"1uy1tcg-RunRow--RunRow",styles:"grid-area:zap-owner;label:RunRow--RunRow;"},ed={name:"twvb4v-RunRow--RunRow",styles:"grid-area:zap-folder;label:RunRow--RunRow;"},ep={name:"m2ookx-RunRow--RunRow",styles:"grid-area:time;label:RunRow--RunRow;"},eh={name:"1e5xz2c-RunRow--RunRow",styles:"grid-area:task-count;label:RunRow--RunRow;"};function RunRow(e){var t,n,r,a=(0,s.useRouter)(),o=(0,m.t)(),l=(0,R.Dk)(e.run.status,e.run.heldReason,e.run.heldStaleAuth);return(0,er.BX)("tr",{children:[(0,er.tZ)("td",{css:ei,onClick:function(){return e.onRunSelect(e.run.id)},children:(0,er.tZ)(q.X,{checked:e.isSelected})}),(0,er.tZ)("td",{css:es,children:(0,er.BX)("div",{style:{gap:"0.25em",display:"flex",alignItems:"center"},children:[(0,er.tZ)(ee.Z,{size:24,status:e.run.status}),l.label]})}),(0,er.tZ)("td",{css:ec,children:(0,er.tZ)(et.Z,{children:(0,er.tZ)($.r,{href:(t=e.run.id,(n=a.query).isBack,r=(0,V.Z)(n,ea),(0,U.formatUrl)({pathname:"/app/history/".concat(t),query:r})),children:(0,er.tZ)(u.x,{color:"inherit",type:"smallPrint1Semibold",children:(0,en.R)(e.run.zap)})})})}),(0,er.tZ)("td",{css:eu,children:(0,er.tZ)(ZapOwner,{run:e.run})}),(0,er.tZ)("td",{css:ed,children:(0,er.tZ)(ZapFolder,{run:e.run})}),(0,er.BX)("td",{css:ep,children:[(0,er.tZ)(_.c,{above:900,children:(0,er.tZ)(u.x,{type:"smallPrint1Semibold",children:"Last run: "})}),(0,er.tZ)(W.Z,{date:e.run.startTime,format:{large:"MMM, DD hh:mm:ss a",medium:"MM/DD HH:mm:ss",small:"MM/DD HH:mm"}[o]})]}),(0,er.BX)("td",{css:eh,children:[(0,er.tZ)(_.c,{above:900,children:(0,er.tZ)(u.x,{type:"smallPrint1Semibold",children:"Tasks used: "})}),(0,er.tZ)(Y.Z,{children:e.run.billableCount})]})]})}var eb=(0,_.uq)({mobile:(0,X.iv)("align-items:center;background-color:",F.w.blue100,";display:grid;grid-template-columns:repeat(1, 1fr);gap:1em;padding:1em;text-align:center;;label:TableActions--mobile;"),desktop:{name:"1t2fy6-TableActions--desktop",styles:"grid-template-columns:1fr auto;text-align:left;label:TableActions--desktop;"}}),ef=(0,_.uq)({mobile:{name:"k1oq5s-TableActions--mobile",styles:"display:grid;gap:1em;grid-template-columns:repeat(1, 1fr);width:100%;label:TableActions--mobile;"},tablet:{name:"p45ks9-TableActions--tablet",styles:"grid-template-columns:repeat(3, 1fr);label:TableActions--tablet;"}});function TableActions(e){if(0===e.selectedRunCount)return null;var t,n,r,a=(t=e.hasSelectedAll,n=e.selectedRunCount,r=e.totalRunCount,t||n===r?"All runs are":1===n?"1 run is":"".concat(n," runs are"));return(0,er.BX)("div",{css:eb,children:[(0,er.BX)(u.x,{children:[a," selected."," ",e.hasSelectedAll?(0,er.tZ)($.r,{onClick:e.onClearSelection,children:"Clear selection."}):(0,er.BX)($.r,{onClick:e.onSelectAll,children:["Select all ",e.totalRunCount," runs matching these filters."]})]}),(0,er.BX)("div",{css:ef,children:[(0,er.tZ)(d.z,{color:"tertiary",hasShadow:!0,iconBefore:"actionPlay",onClick:e.onReplay,size:"small",children:"Replay"}),(0,er.tZ)(d.z,{color:"tertiary",hasShadow:!0,iconBefore:"actionTrash",onClick:e.onDelete,size:"small",children:"Delete"}),(0,er.tZ)(d.z,{color:"tertiary",hasShadow:!0,iconBefore:"arrowBigDown",onClick:e.onDownload,size:"small",children:"Download"})]})]})}function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){(0,a.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var em={name:"sduoq4-HistoryTable--paginationStyle",styles:"align-items:center;display:flex;justify-content:center;padding:1em;label:HistoryTable--paginationStyle;"},ey=(0,X.iv)("border-collapse:collapse;display:flex;flex-direction:column;overflow:auto;caption{padding:1em 0;text-align:left;@media (min-width: ",900,"px){padding-bottom:0;}}td,th{align-items:baseline;text-align:left;}thead{display:none;}tbody{display:flex;flex-direction:column;gap:1em;}th{",A.ZT.smallPrint1Bold,";color:",F.w.neutral800,";}tr{border-radius:4px;border:2px solid ",F.w.neutral300,';column-gap:1em;display:grid;grid-template-areas:"select status status" ". title title" ". zap-owner task-count" ". zap-folder time";grid-template-columns:min-content minmax(6em, 1fr) minmax(6em, 1fr);padding:1em;row-gap:0.5em;}thead tr{border-top:none;border-bottom:3px solid ',F.w.neutral300,";}td{",A.ZT.smallPrint1,";display:flex;gap:0.25em;}@media (min-width: ",900,'px){margin:0;width:100%;tr{border-radius:0;border-width:0 0 1px 0;display:grid;grid-template-areas:"select status title zap-owner zap-folder time task-count";grid-template-columns:min-content 7em repeat(4, minmax(6em, 1fr)) 4em;}td,th{display:flex;flex-direction:column;justify-content:center;}thead{display:table-header-group;}tbody{display:table-row-group;flex-direction:column;}};label:HistoryTable--tableStyle;');function Pagination(e){var t=(0,M.i)().emitEvent;return e.hasNextPage?(0,er.tZ)("div",{css:em,children:(0,er.tZ)(d.z,{color:"secondary",disabled:e.isFetchingMore,onClick:function(){e.loadMore(),t({eventName:R.rw,meta:{event_action:"click",interaction_goal:R.X7,interaction_name:"zap_run_opt_in_load_more",interaction_raw_text:"Load more...",option_selected:"Load more"}})},children:"Load moreâ€¦"})}):null}function TableBody(e){return(0,er.tZ)("tbody",{children:e.runs.map(function(t){return(0,er.tZ)(RunRow,{isSelected:e.selectedRunIds.includes(t.id),onRunSelect:e.onRunSelect,run:t},t.id)})})}function TableHeader(e){var t=(0,M.i)().emitEvent;return(0,er.tZ)("thead",{children:(0,er.BX)("tr",{children:[(0,er.BX)("th",{onClick:function(){e.onSelectAll(),e.hasSomeSelected||t({eventName:R.rw,meta:{event_action:"click",interaction_goal:R.X7,interaction_name:"zap_run_opt_in_select_all",interaction_raw_text:"All visible runs selected from Table Header checkbox",option_selected:"some runs"}})},children:[(0,er.tZ)(q.X,{checked:e.hasSomeSelected})," ",(0,er.tZ)(H.T,{children:"Select all"})]}),(0,er.tZ)("th",{children:"Status"}),(0,er.BX)("th",{children:["Zap ",(0,er.tZ)(H.T,{children:"Name"})]}),(0,er.BX)("th",{children:[(0,er.tZ)(H.T,{children:"Zap"})," Owner"]}),(0,er.BX)("th",{children:[(0,er.tZ)(H.T,{children:"Zap"})," Folder"]}),(0,er.tZ)("th",{children:"Last run"}),(0,er.tZ)("th",{children:"Tasks used"})]})})}function HistoryTable(e){var t,r,a,i=(0,M.i)().emitEvent,s=e.networkStatus===T.I.loading||e.networkStatus===T.I.setVariables,d=c.useState(!1),p=(0,o.Z)(d,2),h=p[0],b=p[1],f=c.useState([]),m=(0,o.Z)(f,2),y=m[0],w=m[1],g=c.useState({onDelete:function(){},show:!1}),_=(0,o.Z)(g,2),v=_[0],Z=_[1],O=c.useState({show:!1}),S=(0,o.Z)(O,2),j=S[0],k=S[1],P=c.useState({onReplay:function(){},show:!1,allowTaskReplay:!1}),z=(0,o.Z)(P,2),X=z[0],A=z[1],F=c.useCallback((t=(0,D.Z)(C().mark(function _callee(e,t){return C().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:Z({onDelete:e,show:!!t});case 1:case"end":return n.stop()}},_callee)})),function(e,n){return t.apply(this,arguments)}),[]),q=c.useCallback((r=(0,D.Z)(C().mark(function _callee2(e,t,n){return C().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:k({args:{actionableRunCount:e,isAllSelected:t,runIds:n},show:!0});case 1:case"end":return r.stop()}},_callee2)})),function(e,t,n){return r.apply(this,arguments)}),[]),H=c.useCallback((a=(0,D.Z)(C().mark(function _callee3(e,t,n){return C().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:A({onReplay:e,show:!!t,allowTaskReplay:!!n});case 1:case"end":return r.stop()}},_callee3)})),function(e,t,n){return a.apply(this,arguments)}),[]),V=(0,G.l)().createNotification,U=(0,N.g)().allowTaskReplay,W=c.useMemo(function(){if(s)return(0,er.tZ)(I.q,{height:500,width:"100%"});if(0===e.totalRunCount){var t,r=(0,L.g)(e.filters),a=(0,E.Z)(new Date,new Date(e.filters.dateFilter.to));return(0,er.tZ)(K.I,{isOutOfRetentionPeriod:a>60,handleFilterReset:e.resetFilters,isFilterEmpty:r,size:"small"})}var clearSelection=function(){b(!1),w([])},selectAllVisibleRuns=function(){w(e.runs.map(function(e){return e.id}))},o=B()(function(){return n.e(8517).then(n.bind(n,38517))},{loadableGenerated:{webpack:function(){return[38517]}}}),c=B()(function(){return n.e(7462).then(n.bind(n,27462))},{loadableGenerated:{webpack:function(){return[27462]}}}),u=B()(function(){return n.e(9766).then(n.bind(n,19766))},{loadableGenerated:{webpack:function(){return[19766]}}}),handleDelete=function handleDelete(){clearSelection(),i({eventName:R.rw,meta:{event_action:"click",interaction_goal:R.X7,interaction_name:"zap_run_opt_in_delete",interaction_raw_text:"Run deleted",option_selected:"delete"}}),e.onDelete(y,h),F(handleDelete,!1)},handleReplay=function handleReplay(){clearSelection(),i({eventName:R.rw,meta:{event_action:"click",interaction_goal:R.X7,interaction_name:"zap_run_opt_in_replay",interaction_raw_text:"Run replay clicked",option_selected:"replay"}}),e.onReplay(y,h),H(handleReplay,!1,U)};return(0,er.BX)(er.HY,{children:[(0,er.tZ)(TableActions,{hasSelectedAll:h,onClearSelection:clearSelection,onDelete:function(){F(handleDelete,!0)},onDownload:function(){q(y.length,h,y)},onReplay:function(){H(handleReplay,!0,U)},onSelectAll:function(){b(!0),selectAllVisibleRuns(),i({eventName:R.rw,meta:{event_action:"click",interaction_goal:R.X7,interaction_name:"zap_run_opt_in_mass_actions_select_all",interaction_raw_text:"All runs selected from mass actions banner",option_selected:"all runs"}})},selectedRunCount:y.length,totalRunCount:e.totalRunCount}),(0,er.tZ)(TableHeader,{hasSelectedAll:h,hasSomeSelected:y.length>0,onSelectAll:function(){if(h||y.length===e.runs.length){clearSelection();return}selectAllVisibleRuns()}}),(0,er.tZ)(TableBody,{onRunSelect:function(e){w(function(t){return t.includes(e)?t.filter(function(t){return t!==e}):[].concat((0,x.Z)(t),[e])})},runs:e.runs,selectedRunIds:y}),(0,er.tZ)(Pagination,{hasNextPage:e.runs.length<e.totalRunCount,isFetchingMore:e.networkStatus===T.I.fetchMore,loadMore:e.onFetchMore}),v.show&&(0,er.tZ)(o,{onClose:function(){return Z(function(e){return _objectSpread(_objectSpread({},e),{},{show:!1})})},onDelete:v.onDelete}),j.show&&(0,er.tZ)(c,{onCanceled:function(){return k({show:!1})},onConfirmed:(t=(0,D.Z)(C().mark(function _callee4(t){return C().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:j.args&&e.onDownload(j.args.runIds,j.args.isAllSelected,j.args.actionableRunCount,t).then(function(){var e,n="format:".concat(t,"; selected run count: ").concat(null===(e=j.args)||void 0===e?void 0:e.actionableRunCount);i({eventName:R.rw,meta:{event_action:"click",interaction_goal:R.X7,interaction_name:"new_zap_run_opt_in_download",interaction_raw_text:n,option_selected:t}}),V(l.a3)}).catch(function(e){V((0,l.kW)(null==e?void 0:e.message))}),k({show:!1});case 2:case"end":return n.stop()}},_callee4)})),function(e){return t.apply(this,arguments)})}),X.show&&(0,er.tZ)(u,{allowTaskReplay:!0,onClose:function(){return A(function(e){return _objectSpread(_objectSpread({},e),{},{show:!1})})},onReplay:X.onReplay})]})},[V,v.show,j.args,j.show,F,q,h,e,y,s,X.show]);return(0,er.BX)("table",{css:ey,children:[(0,er.tZ)("caption",{children:(0,er.tZ)(u.x,{type:"pageHeader7",children:"Run history"})}),W]})}var ew=n(48377),eg=n(7328),e_=n(60138),ev=n(40794);function operations_generated_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function operations_generated_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?operations_generated_ownKeys(Object(n),!0).forEach(function(t){(0,a.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):operations_generated_ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var eZ={},eR=(0,e_.Ps)(r||(r=(0,eg.Z)(["\n  query ZapRunsCounts($filters: RunFilter!) {\n    zapsRunsCount(filters: $filters) {\n      date\n      tasks: counts {\n        error\n        filtered\n        halted\n        held\n        pending\n        scheduled\n        skipped\n        success\n        throttled\n        waiting\n      }\n    }\n  }\n"]))),eO=n(54815),eS=n(43930);function RunsCountGraph_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function RunsCountGraph_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?RunsCountGraph_ownKeys(Object(n),!0).forEach(function(t){(0,a.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):RunsCountGraph_ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function RunsCountGraph(e){var t=(0,s.useRouter)(),n=(0,M.i)().emitEvent;return e.networkStatus===T.I.loading||e.networkStatus===T.I.setVariables?(0,er.tZ)(I.q,{height:300}):(0,er.tZ)(eO.Z,{onBarClick:function(e){t.push({query:RunsCountGraph_objectSpread(RunsCountGraph_objectSpread({},t.query),{},{start_datetime:e.date.start,end_datetime:e.date.end})}),n({eventName:R.rw,meta:{event_action:"click",interaction_goal:R.X7,interaction_name:"zap_run_day_selected",interaction_raw_text:"user selected a day on the chart",option_selected:"Day selected: ".concat(e.date.start)}})},range:{start:e.startDate,end:e.endDate},trend:e.runCounts,trendType:eS.r.status})}function Dashboard_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Dashboard_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Dashboard_ownKeys(Object(n),!0).forEach(function(t){(0,a.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Dashboard_ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var ej=(0,_.uq)({tablet:{name:"1a5czva-Dashboard--tablet",styles:"align-items:center;display:flex;justify-content:space-between;label:Dashboard--tablet;"},mobile:{name:"tf4pba-Dashboard--mobile",styles:"display:grid;grid-gap:30px;label:Dashboard--mobile;"}}),ek={name:"8a90g9-Dashboard--notificationStyle",styles:"margin-top:2em;position:sticky;top:1em;z-index:100;label:Dashboard--notificationStyle;"},eD=(0,_.uq)({tablet:{name:"1bx7t82-Dashboard--tablet",styles:"display:flex;margin-top:40px;width:30%;label:Dashboard--tablet;"},mobile:{name:"joaeoj-Dashboard--mobile",styles:"display:flex;margin-top:30px;width:100%;label:Dashboard--mobile;"}}),ex=(0,_.uq)({tablet:{name:"1gucy6k-Dashboard--tablet",styles:'display:grid;grid-gap:10px;align-items:flex-end;grid-template-areas:"status autoreplay";grid-template-columns:auto 200px;grid-template-rows:1fr;label:Dashboard--tablet;'},mobile:{name:"tf4pba-Dashboard--mobile",styles:"display:grid;grid-gap:30px;label:Dashboard--mobile;"}}),eP=(0,_.uq)({tablet:{name:"1a5czva-Dashboard--tablet",styles:"align-items:center;display:flex;justify-content:space-between;label:Dashboard--tablet;"},mobile:{name:"1hkf4es-Dashboard--mobile",styles:"margin-top:30px;display:grid;label:Dashboard--mobile;"}});function Dashboard(){var e,t,n,r=(0,m.t)(),a=(0,h.X8)(),o=(0,ew.m)(),l=o.filters,i=o.handleFilterChange,_=o.handleFilterReset,D=(0,y.MN)(),x=(0,w.V)({accountId:a,filters:l,getAppImages:!1,getFolder:!0,onMassAction:D.onMassAction,pageSize:25}),P=(e={notifyOnNetworkStatusChange:!0,variables:{filters:{apps:l.apps,channel:l.channel,channelError:l.channelError,customuserIds:l.ownerIds,folderIds:l.folderIds,periodEnd:l.dateFilter.to,periodStart:l.dateFilter.from,query:l.search,status:l.status,zapIds:l.nodeIds}}},t=operations_generated_objectSpread(operations_generated_objectSpread({},eZ),e),ev.a(eR,t)),C=(0,g.W)({filters:l}).onDownload,T=(0,s.useRouter)(),z=(0,c.useCallback)(function(e){(e||"")!==(l.search||"")&&T.push((0,v.lZ)(R._j.log,Dashboard_objectSpread(Dashboard_objectSpread({},l),{},{page:0,search:e}),T.query))},[l,T]);return(0,er.BX)("div",{children:[(0,er.BX)("div",{css:ej,children:[(0,er.tZ)(u.x,{type:"pageHeader5",children:"Zap history"}),(0,er.tZ)(k.L,{})]}),D.message&&(0,er.tZ)("div",{css:ek,children:(0,er.tZ)(Z.U,{message:D.message})}),(0,er.BX)("div",{css:eP,children:["small"===r&&(0,er.BX)(c.Fragment,{children:[(0,er.tZ)(d.z,{color:"secondary",size:"medium",iconBefore:"navBell",href:"/app/notification-settings",children:"Error notifications"}),(0,er.tZ)(p.L,{height:20})]}),(0,er.tZ)(O.D,{}),"small"!==r&&(0,er.tZ)(d.z,{color:"secondary",size:"small",iconBefore:"navBell",href:"/app/notification-settings",children:"Error notifications"})]}),(0,er.tZ)("div",{css:eD,children:(0,er.tZ)(j.Z,{isFullWidth:!0,isSearching:!1,onChange:z,value:l.search})}),(0,er.tZ)(p.L,{height:"small"===r?20:30}),(0,er.tZ)(S.Z,{filters:l,onClearFilters:_,onFilterChange:i,onRefreshData:function(){P.refetch()}}),(0,er.tZ)(p.L,{height:"small"===r?20:30}),(0,er.BX)("div",{css:ex,children:[(0,er.tZ)(f.Z,{onChange:function(e){return i("status",e)},size:r,value:l.status||[]}),(0,er.tZ)(b.Z,{})]}),(0,er.tZ)(p.L,{height:60}),(0,er.tZ)(u.x,{type:"pageHeader7",children:"Run count"}),(0,er.tZ)(p.L,{height:40}),(0,er.tZ)(RunsCountGraph,{endDate:l.dateFilter.to,networkStatus:P.networkStatus,runCounts:null===(n=P.data)||void 0===n?void 0:n.zapsRunsCount,startDate:l.dateFilter.from}),(0,er.tZ)(p.L,{height:40}),(0,er.tZ)(HistoryTable,{filters:l,networkStatus:x.networkStatus,onDelete:x.onDelete,onDownload:C,onFetchMore:function(){return x.fetchMore({variables:{offset:x.runs.length}})},onRefetch:x.onRefetch,onReplay:x.onReplay,resetFilters:_,runs:x.runs,totalRunCount:x.runCount})]})}var eC=n(9265),eT=n(63615),ez=n(85665),eB=n(7656);function history_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function history_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?history_ownKeys(Object(n),!0).forEach(function(t){(0,a.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):history_ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function History(){var e=(0,s.useRouter)(),t=(0,eC._)("use_beta_observe_dashboard",!1),n=(0,o.Z)(t,2),r=n[0],a=n[1],u=(0,eT.V)().flags;return(c.useEffect(function(){r&&u&&!u.observe_run_history_v2&&a(!1)},[u]),r)?(0,er.tZ)(ez.D,{title:"Zap Runs | Zap History",children:(0,er.tZ)(eB.X,{children:(0,er.tZ)(Dashboard,{})})}):(0,er.tZ)(ez.D,{title:"Zap Runs | Zap History",children:(0,er.tZ)(eB.X,{children:(0,er.tZ)(l.nM,{showFilters:!0,children:function(t){return(0,er.tZ)(i.y,history_objectSpread(history_objectSpread({},t),{},{navigateParentWindow:e.push,showOwner:!0,showZapDetails:!0}))}})})})}},24368:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/app/history",function(){return n(84474)}])}},function(e){e.O(0,[9716,6314,9224,2291,7254,6409,776,407,5196,129,975,7109,8558,8149,245,7846,6691,7202,1337,9411,9124,550,310,2436,6504,4815,9455,9774,2888,179],function(){return e(e.s=24368)}),_N_E=e.O()}]);